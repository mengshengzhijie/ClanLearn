# 指针

指针是什么？

指针理解的2个要点：

1.指针是内存中一个最小单元的编号，也就是地址

2.平时口语中说的指针，通常指的是指针变量，是用来存放内存地址的变量总结：指针就是地址，口语中说的指针通常指的是指针变量。

![](Screenshot/Screenshot_20250110_140254.png)

# 指针和指针类型

关于使用int指针访问char指针的问题
在C语言中，不同类型的指针指向不同类型的对象，它们的大小和解释方式也不同。直接用int指针访问char指针是不安全且不符合类型系统的规范，可能会导致未定义行为（Undefined Behavior）。以下是详细解释：
1. int指针与char指针的区别
    int *：指向一个整型数据，通常占用4个字节（32位系统）或8个字节（64位系统），具体取决于平台。
    char *：指向一个字符数据，通常占用1个字节。

2. 类型不匹配的风险
    内存对齐：int类型的变量在内存中通常需要按其大小对齐（例如4字节对齐），而char类型没有这种要求。如果用int指针访问未对齐的char数组，可能会导致性能问题甚至硬件异常。
    数据解释错误：int指针会将连续的多个字节解释为一个整数，而char指针每次只解释一个字节。如果你用int指针访问char指针指向的数据，可能会读取到错误的值。
    未定义行为：C标准规定，不同类型指针之间的强制转换和解引用可能导致未定义行为，特别是在不同类型的对象之间进行不当的指针算术操作时。

3. 正确的做法
    如果你想处理不同类型的指针，应该使用适当的类型转换，并确保理解你正在做什么。以下是一些常见的做法：
    逐字节访问：如果你确实需要逐字节访问一个int变量，可以使用char指针来实现：

  # 野指针

 未初始化的指针或是函数销毁的的指针称之为野指针

```c
int* text() {
    int a = 10;
    return &a;
}
int main () {
    int *p = text();
    printf("%d\n", *p);

    return 0;
}
```

## 避免野指针的出现

1.指针初始化

2.小心指针越界

3.指针指向空间释放即使置NULL

4.避免返回局部变量的地址

5.指针使用之前检查有效性

# 指针运算

```c
#define N_V 5
float values[N_V]
float* vp
for (vp = values[0]; vp < &values) {
        *vp++ = 0;
}
*vp++   等于    *vp=0,vp++;
```

# 二级指针

```c
int main() { // 二级指针
        int a = 10;
        int* pa = &a; // pa是一个指针，指向a的地址
        *pa = 20;
        printf("a = %d\n",a);
} a = 20
```

```c
int main() { // 二级指针
        int a = 10;
        int* pa = &a; // pa是一个指针，指向a的地址
        int ** ppa = &pa;
        **ppa = 20;
        printf("a = %d\n",a);
}
```

# 指针数组

存放指针的数组

```c
int main() {
    int a = 10;
    int b = 20;
    int c = 30;

    int arr[10];

    int* pa = &a;
    int* pb = &b;
    int* pc = &c;

    int* parr[10] = {&a,&b,&c};
    int* parr[10] = {&a,&b,&c};
    for (int i = 0; i < 3; ++i) {
        printf("%d\n",*(parr[i]));
```

## 模拟二维数组

```c
int main() {
    int arr[3][4] = {1,2,3,4,2,3,4,5,3,4,5,6};
    for (int i = 0; i < 3; ++i) {
        for (int j = 0; j < 4; ++j) {
            printf("%d ",arr[i][j]);
        }
    }
}
```

![](Screenshot/Screenshot_20250110_210931.png)

```c
    int arr1[4] = {1, 2, 3, 4};
    int arr2[4] = {2, 3, 4, 5};
    int arr3[4] = {3, 4, 5, 6};

    int* parr[3] = {arr1, arr2, arr3};
    for (int i = 0; i < 3; ++i) {
        for (int j = 0; j < 4; ++j) {
            printf("%d ",*(parr[i] + j));
        }
        printf("\n");
    }
}
1 2 3 4 
2 3 4 5 
3 4 5 6 

```

